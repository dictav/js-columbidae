{"version":3,"file":"bundle.js","sources":["../src/stackdriver.js","../src/main.js"],"sourcesContent":["var baseAPIUrl = \"https://clouderrorreporting.googleapis.com/v1beta1/projects/\";\n\nfunction genV8StackMessage(err) {\n  var message = err.stack.toString();\n  console.log(message);\n  return message;\n}\n\nfunction StackDriver(config) {\n  this.url = baseAPIUrl + config.projectId + \"/events:report?key=\" + config.key;\n  this.payload = {\n    serviceContext: {\n      // https://cloud.google.com/error-reporting/reference/rest/v1beta1/ServiceContext\n      // resourceType is set automatically for incoming errors and must not be set when reporting errors. \n      service: config.service,\n      version: config.version\n    },\n    context: {\n      httpRequest: {\n        userAgent: window.navigator.userAgent,\n        url: window.location.href,\n        referrer: document.referrer,\n\n      }\n    }\n  }\n}\n\nStackDriver.prototype.send = function(err) {\n  this.payload.message = genV8StackMessage(err);\n\n  if (navigator.sendBeacon) {\n    navigator.sendBeacon(this.url, JSON.stringify(this.payload))\n    return;\n  }\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('POST', this.url, true);\n  xhr.send(JSON.stringify(this.payload));\n}\n\nexport default StackDriver;\n","import StackDriver from './stackdriver'\n\nfunction hello() {\n  /*@cc_on return false;@*/\n  throw new Error(\"Hello, My StackdriverJS!\");\n}\n\nexport default function HelloStackDriver(config){\n  var sd = new StackDriver(config);\n  try {\n    throw new Error(\"Whats wrong!!!\");\n  } catch(err) {\n    sd.send(err);\n  }\n}\n"],"names":["genV8StackMessage","err","message","stack","toString","console","log","StackDriver","config","this","url","baseAPIUrl","projectId","key","payload","serviceContext","service","version","context","httpRequest","userAgent","window","navigator","location","href","referrer","document","prototype","send","sendBeacon","JSON","stringify","xhr","XMLHttpRequest","open","sd","Error"],"mappings":"4LAEA,SAASA,EAAkBC,GACzB,IAAIC,EAAUD,EAAIE,MAAMC,WAExB,OADAC,QAAQC,IAAIJ,GACLA,EAGT,SAASK,EAAYC,GACnBC,KAAKC,IAAMC,EAAaH,EAAOI,UAAY,sBAAwBJ,EAAOK,IAC1EJ,KAAKK,SACHC;;;AAGEC,QAASR,EAAOQ,QAChBC,QAAST,EAAOS,SAElBC,SACEC,aACEC,UAAWC,OAAOC,UAAUF,UAC5BV,IAAKW,OAAOE,SAASC,KACrBC,SAAUC,SAASD,YArB3B,IAAId,EAAa,sEA4BjBJ,EAAYoB,UAAUC,KAAO,SAAS3B,GAGpC,GAFAQ,KAAKK,QAAQZ,QAAUF,EAAkBC,GAErCqB,UAAUO,WACZP,UAAUO,WAAWpB,KAAKC,IAAKoB,KAAKC,UAAUtB,KAAKK,cADrD,CAKA,IAAIkB,EAAM,IAAIC,eACdD,EAAIE,KAAK,OAAQzB,KAAKC,KAAK,GAC3BsB,EAAIJ,KAAKE,KAAKC,UAAUtB,KAAKK,YC/BhB,SAA0BN,GACvC,IAAI2B,EAAK,IAAI5B,EAAYC,GACzB,IACE,MAAM,IAAI4B,MAAM,kBAChB,MAAMnC,GACNkC,EAAGP,KAAK3B"}